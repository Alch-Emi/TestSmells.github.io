<!DOCTYPE html>
<html>
<head>
    <title>Software Unit Test Smells</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../assets/w3.css">
    <link rel="stylesheet" href="../assets/w3-theme-teal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet"
          href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/languages/java.min.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-117089382-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-117089382-1');
    </script>

    <script>hljs.initHighlightingOnLoad();</script>

</head>
<body>

<ul class="topnav w3-small">
    <li><a href="../index.html">Home</a></li>
    <li><a href="testsmells.html">Test Smell Types</a></li>
    <li><a class="active" href="testsmellexamples.html">Test Smell Examples</a></li>
    <li><a href="testsmelldetector.html">Test Smell Detector</a></li>
    <li class="right"><a href="about.html">About</a></li>
</ul>

<!-- Header -->
<header class="w3-container w3-theme w3-padding" id="myHeader">
    <div class="w3-center">
        <!--<a href='../index.html' class='w3-bar-item w3-button w3-hover-theme'><h4>Software Unit Test Smells</h4></a>-->
        <h1 class="w3-xxxlarge w3-animate-bottom">Test Smell Examples</h1>
    </div>
</header>

<div class="w3-center w3-padding-32">
    <div class="w3-card w3-container w3-justify w3-padded-box">
        <p>
            Provided below are examples of test smells that were detected in open-source projects.
        </p>
        <ul id="SmellList">
            <li>
                <a href="#AssertionRoulette">Assertion Roulette</a>
            </li>
            <li>
                <a href="#ConditionalTestLogic">Conditional Test Logic</a>
            </li>
            <li>
                <a href="#ConstructorInitialization">Constructor Initialization</a>
            </li>
            <li>
                <a href="#DefaultTest">Default Test</a>
            </li>
            <li>
                <a href="#DuplicateAssert">Duplicate Assert</a>
            </li>
            <li>
                <a href="#EagerTest">Eager Test</a>
            </li>
            <li>
                <a href="#EmptyTest">Empty Test</a>
            </li>
            <li>
                <a href="#ExceptionHandling">Exception Handling</a>
            </li>
            <li>
                <a href="#GeneralFixture">General Fixture</a>
            </li>
            <li>
                <a href="#IgnoredTest">Ignored Test</a>
            </li>
            <li>
                <a href="#LazyTest">Lazy Test</a>
            </li>
            <li>
                <a href="#MagicNumberTest">Magic Number Test</a>
            </li>
            <li>
                <a href="#MysteryGuest">Mystery Guest</a>
            </li>
            <li>
                <a href="#RedundantPrint">Redundant Print</a>
            </li>
            <li>
                <a href="#RedundantAssertion">Redundant Assertion</a>
            </li>
            <li>
                <a href="#ResourceOptimism">Resource Optimism</a>
            </li>
            <li>
                <a href="#SensitiveEquality">Sensitive Equality</a>
            </li>
            <li>
                <a href="#SleepyTest">Sleepy Test</a>
            </li>
            <li>
                <a href="#UnknownTest">Unknown Test</a>
            </li>
        </ul>
        <div class="w3-container" id="AssertionRoulette">
            <h5>Assertion Roulette</h5>
            <pre><code class="java">
@MediumTest
public void testCloneNonBareRepoFromLocalTestServer() throws Exception {
    Clone cloneOp = new Clone(false, integrationGitServerURIFor("small-repo.early.git"), helper().newFolder());

    Repository repo = executeAndWaitFor(cloneOp);

    assertThat(repo, hasGitObject("ba1f63e4430bff267d112b1e8afc1d6294db0ccc"));

    File readmeFile = new File(repo.getWorkTree(), "README");
    assertThat(readmeFile, exists());
    assertThat(readmeFile, ofLength(12));
}
                </code></pre>
            <p>
                Rationale: The assertThat() method is called 3 times within the test method. Each assert statement
                checks for a different condition, but the developer does not provide a explanation message for each
                assert statement. Hence, if one of the assert statements were to fail, identifying the cause of the
                failure is not straightforward.
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href="https://github.com/rtyley/agit/blob/fc99d8eaa42940198589b032a2b9ba74d9ce3094/agit-integration-tests/src/main/java/com/madgag/agit/GitAsyncTaskTest.java"
                        target="_blank">GitAsyncTaskTest.java</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="ConditionalTestLogic">
            <h5>Conditional Test Logic</h5>
            <pre><code class="java">
@Test
public void testSpinner() {

    for (Map.Entry<String, String> entry : sourcesMap.entrySet()) {

        String id = entry.getKey();
        Object resultObject = resultsMap.get(id);
        if (resultObject instanceof EventsModel) {
            EventsModel result = (EventsModel) resultObject;
            if (result.testSpinner.runTest) {
                System.out.println("Testing " + id + " (testSpinner)");
                //System.out.println(result);
                AnswerObject answer = new AnswerObject(entry.getValue(), "", new CookieManager(), "");
                EventsScraper scraper = new EventsScraper(RuntimeEnvironment.application, answer);
                SpinnerAdapter spinnerAdapter = scraper.spinnerAdapter();
                assertEquals(spinnerAdapter.getCount(), result.testSpinner.data.size());
                for (int i = 0; i < spinnerAdapter.getCount(); i++) {
                    assertEquals(spinnerAdapter.getItem(i), result.testSpinner.data.get(i));
                }
            }
         }
    }
}
            </code></pre>
            <p>
                Rationale: The test method, testSpinner(), contains multiple control statements (i.e. control flow
                statements). The success or failure of the test is based on the result of the assertion method which is
                within the control flow blocks and hence not predictable. This also increases the complexity of
                the test method and hence has a negative impact on
                maintenance of the test.
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href="https://github.com/Tyde/TuCanMobile/blob/dbee8a0a738400427bb94e5bc38a9970687ac147/app/src/test/java/com/dalthed/tucan/EventsScraperTest.java"
                        target="_blank">EventsScraperTest.java</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="ConstructorInitialization">
            <h5>Constructor Initialization</h5>
            <pre><code class="java">
public class TagEncodingTest extends BrambleTestCase {

	private final CryptoComponent crypto;
	private final SecretKey tagKey;
	private final long streamNumber = 1234567890;

	public TagEncodingTest() {
		crypto = new CryptoComponentImpl(new TestSecureRandomProvider());
		tagKey = TestUtils.getSecretKey();
	}

	@Test
	public void testKeyAffectsTag() throws Exception {
		Set<Bytes> set = new HashSet<>();
		for (int i = 0; i < 100; i++) {
			byte[] tag = new byte[TAG_LENGTH];
			SecretKey tagKey = TestUtils.getSecretKey();
			crypto.encodeTag(tag, tagKey, PROTOCOL_VERSION, streamNumber);
			assertTrue(set.add(new Bytes(tag)));
		}
	}
 ...
}
            </code></pre>
            <p>
                Rationale: The test class utilizes a constructor instead of a setUp method to initialize fields.
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href="https://code.briarproject.org/akwizgran/briar/blob/0327d4f38a16b09be7cb2578d7c6f694093e65df/bramble-core/src/test/java/org/briarproject/bramble/crypto/TagEncodingTest.java"
                        target="_blank">TagEncodingTest.java</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="DefaultTest">
            <h5>Default Test</h5>
            <pre><code class="java">
public class ExampleUnitTest {
    @Test
	public void addition_isCorrect() throws Exception {
		assertEquals(4, 2 + 2);
	}

    @Test
    public void shareProblem() throws InterruptedException {
    	.....
		Observable.just(200)
 		.subscribeOn(Schedulers.newThread())
		.subscribe(begin.asAction());
		begin.set(200);
		Thread.sleep(1000);
		assertEquals(beginTime.get(), "200");
    	.....
	}
	.....
}
            </code></pre>
            <p>
                Rationale: The default test class provided by Android Studio is utilized to hold actual test methods.
                The developer should rename this test class (and remove the example test method).
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href="https://github.com/httpdispatch/MissedNotificationsReminder/blob/350c3a8fbab935a733d371860e86a937c1d17b2c/app/src/test/java/com/app/missednotificationsreminder/ExampleUnitTest.java"
                        target="_blank">ExampleUnitTest.java</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="DuplicateAssert">
            <h5>Duplicate Assert</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="EagerTest">
            <h5>Eager Test</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="EmptyTest">
            <h5>Empty Test</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="ExceptionHandling">
            <h5>Exception Handling</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="GeneralFixture">
            <h5>General Fixture</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="IgnoredTest">
            <h5>Ignored Test</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="LazyTest">
            <h5>Lazy Test</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="MagicNumberTest">
            <h5>Magic Number Test</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="MysteryGuest">
            <h5>Mystery Guest</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="RedundantPrint">
            <h5>Redundant Print</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="RedundantAssertion">
            <h5>Redundant Assertion</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="ResourceOptimism">
            <h5>Resource Optimism</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="SensitiveEquality">
            <h5>Sensitive Equality</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="SleepyTest">
            <h5>Sleepy Test</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
        <div class="w3-container" id="UnknownTest">
            <h5>Unknown Test</h5>
            <pre><code class="java">

            </code></pre>
            <p>
                Rationale: xx
            </p>
            <p>
                <span class=" w3-small w3-left-align">Original File(s):<a
                        href=""
                        target="_blank">xx</a></span>
                <span class=" w3-large w3-right"><a href="#SmellList"><i class="fa fa-arrow-circle-up"></i></a></span>
            </p>
        </div>
    </div>
</div>


<footer class="w3-container w3-teal w3-footer w3-animate-opacity">
    <p class="w3-small">
        Made with <i class="fa fa-heart w3-animate-fading2  w3-fa-spin"></i> at <a href="http://www.se.rit.edu/"
                                                                                   style="text-decoration: none;"
                                                                                   target="_blank">RIT</a>
    </p>
</footer>
</body>
</html>